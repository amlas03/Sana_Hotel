package sana_hotel.swing.search;

import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

import sana_hotel.beans.Client;
import sana_hotel.beans.Reservation;
import sana_hotel.beans.attributsSearch;
import sana_hotel.database.Clientdb;
import sana_hotel.database.Reservationdb;
import sana_hotel.swing.RoundedButton;

public class ReservationSearch extends GeneralSearch implements ActionListener{
	
	RoundedButton b = new RoundedButton("Occuper");
	public ReservationSearch(Reservation a) {
		super(a);
		b1.setText(a.searchElements(0));
		b2.setText(a.searchElements(1));
		b1.addActionListener(this);
		b2.addActionListener(this);
		search.addActionListener(this);
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		if (e.getSource() == b1) {
        	l.setText("Saisir un Id");
        	if(e.getSource()==search) {
				JOptionPane.showMessageDialog(null, "hi");
				Reservationdb cd=new Reservationdb();
				int i=Integer.parseInt(this.getText());
				try {
					la=new JLabel(cd.getReservationsByClientId(i).toString());
				} catch (ClassNotFoundException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();
				} catch (SQLException e1) {
					// TODO Auto-generated catch block
					e1.printStackTrace();}
				p1.add(la);
				
				p1.add(b);
				b.addActionListener(this);
				}}
        	if (e.getSource() == b2) {
            	l.setText("Saisir un Num");
            	if(e.getSource()==search) {
    				JOptionPane.showMessageDialog(null, "hi");
    				int i =Integer.parseInt(this.getText());
    				Reservationdb cd=new Reservationdb();
    				String n=this.getText();
    				List<Reservation> res =new ArrayList<>();
    				List<JLabel> s =new ArrayList<>();
    				try {
    					res = cd.getReservationsByRoomNumber(i);
    					for(int j=0; j<res.size();j++) {
    						s.get(i).setText((res.get(j).toString()));}
    				} catch (ClassNotFoundException e1) {
    					// TODO Auto-generated catch block
    					e1.printStackTrace();
    				} catch (SQLException e1) {
    					// TODO Auto-generated catch block
    					e1.printStackTrace();}
    				JPanel p = new JPanel();
    				p.setLayout(new FlowLayout(FlowLayout.CENTER));
    				for(int j=0;j<s.size();j++) {
    					p.add(s.get(j));
    					p.add(b);
    					p1.add(p);}}}
                // Revalidate and repaint the panel
                b.revalidate();
                b.repaint();
	}
	
}
